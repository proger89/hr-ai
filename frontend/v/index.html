<!doctype html>
<html lang="ru">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Единая ссылка</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <style>
      :root{--accent:#3b5bdb;--bg:#f7f8fa;--text:#1f2a37}
      *{box-sizing:border-box}
      body{font-family:system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,Cantarell,Noto Sans,sans-serif;margin:0;background:var(--bg);color:var(--text)}
      .bg-grad{background:radial-gradient(1200px 500px at 10% -10%, #e7f1ff 0%, rgba(231,241,255,0) 60%), radial-gradient(1000px 600px at 110% 0%, #f2f9ff 0%, rgba(242,249,255,0) 60%), var(--bg)}
      header{position:sticky;top:0;background:#fff;border-bottom:1px solid #e5e7eb;padding:10px 16px;display:flex;align-items:center;justify-content:space-between}
      main{max-width:720px;margin:24px auto;padding:0 16px;min-height:calc(100vh - 80px);display:flex;align-items:center}
      .card{background:#fff;border:1px solid #e5e7eb;border-radius:12px;padding:16px;box-shadow:0 10px 30px rgba(0,0,0,.06)}
      .row{display:flex;gap:8px;align-items:center;flex-wrap:wrap}
      input,button{border:1px solid #cbd5e1;border-radius:8px;padding:12px}
      button{background:#fff;color:#111827;cursor:pointer}
      button.primary{background:var(--accent);color:#fff;border-color:var(--accent)}
      .pill{padding:4px 8px;border-radius:999px;background:#eceff5}
      .fade-in{animation:fadeIn .25s ease-out both}
      @keyframes fadeIn{from{opacity:0;transform:translateY(6px)}to{opacity:1;transform:none}}
      /* Responsive */
      @media (max-width: 600px){
        header{flex-direction:column;align-items:flex-start;gap:8px}
        main{padding:0 12px}
        .row{flex-wrap:wrap}
      }
    </style>
  </head>
  <body class="bg-grad">
    <header>
      <strong id="hdr">Единая ссылка</strong>
      <select id="uiLang"><option value="ru">RU</option><option value="en">EN</option></select>
    </header>
    <main>
      <div class="card fade-in">
        <h2 id="title">Введите код приглашения</h2>
        <div class="row">
          <input id="code" placeholder="VA123-0456" />
          <button id="btnGo" class="primary btn-lg" disabled>Продолжить</button>
        </div>
        <div class="row" style="margin-top:8px"><span class="pill" id="vac"></span></div>
      </div>
    </main>
    <script>
      (function(){ try{ document.querySelectorAll('button').forEach(b=>{ b.classList.add('btn'); if(b.classList.contains('primary')) b.classList.add('btn-primary'); else b.classList.add('btn-outline-secondary'); }); document.querySelectorAll('select').forEach(s=> s.classList.add('form-select')); document.querySelectorAll('input').forEach(i=> i.classList.add('form-control')); }catch{} })();
      const Telemetry = { emit(n,p){ try{ console.log('[telemetry]', n, p||{}); }catch{} } };
      const tr = { ru: { hdr:'Единая ссылка', title:'Введите код приглашения', go:'Продолжить' }, en: { hdr:'Unified link', title:'Enter invitation code', go:'Continue' } };
      const uiSel = document.getElementById('uiLang');
      function applyI18n(){ const l=uiSel.value; const t=tr[l]||tr.ru; document.getElementById('hdr').textContent=t.hdr; document.getElementById('title').textContent=t.title; document.getElementById('btnGo').textContent=t.go; document.documentElement.lang=l; }
      uiSel.value=(localStorage.getItem('uiLang')||((navigator.language||'ru').startsWith('ru')?'ru':'en')); applyI18n(); uiSel.addEventListener('change', ()=>{ localStorage.setItem('uiLang', uiSel.value); applyI18n(); });
      const parts = location.pathname.split('/').filter(Boolean); const va = parts[1]||''; document.getElementById('vac').textContent = va||'VA???';
      const code = document.getElementById('code'); const btn = document.getElementById('btnGo');
      code.addEventListener('input', ()=>{ btn.disabled = (code.value.trim().length < 3); });
      btn.addEventListener('click', ()=>{ Telemetry.emit('clicked', { mode:'UVL', va, code: code.value.trim() }); location.href='/candidate.html'; });
      code.addEventListener('keydown', (e)=>{ if(e.key==='Enter' && !btn.disabled){ e.preventDefault(); btn.click(); } });
      Telemetry.emit('invite_opened', { mode:'UVL', va });
    </script>
  </body>
  </html>


